@page "/addAdult"
@attribute [Authorize]
@using Family.Models
@using Family.Data
@using Family.Persistence
@using global::Models

@inject IAdultService adultData
@inject NavigationManager NavigationManager
@inject FileContext FileContext
<h3>Add Adult</h3>

<form>

    <div>
        <div class="form-group">
            <label class="label" for="fname">First name</label>
            <input class="input" type="text" id="fname" name="fname" placeholder="First name"
                   @bind-value="@fname">
        </div>
        <div class="form-group">
            <label class="label" for="lname">Last name</label>
            <input class="input" type="text" id="lname" name="lname" placeholder="Last name"
                   @bind-value="@lname">
        </div>
        <div class="form-group">
            <label class="label" for="age">Age</label>
            <input class="input" type="number" id="age" name="age" placeholder="Age" @bind-value="@age">
        </div>
        <div class="form-group">
            <label class="label" for="sex">Sex</label>
            <select class="input" @bind="@sex">
                <option value="">
                    Select gender
                </option>
                <option value="M">
                    M
                </option>
                <option value="F">
                    F
                </option>
            </select>
        </div>

        <div>
            <div class="form-group">
                <label class="label" for="hair-color">Hair color</label>
                <input class="input" type="text" id="hair-color" name="hair-color" placeholder="Hair color"
                       @bind-value="@hairColor">
            </div>
            <div class="form-group">
                <label class="label" for="eye-color">Eye color</label>
                <input class="input" type="text" id="eye-color" name="eye-color" placeholder="Eye color"
                       @bind-value="@eyeColor">
            </div>
            <div class="form-group">
                <label class="label" for="height">Height</label>
                <input class="input" type="text" id="height" name="height" placeholder="Height"
                       @bind-value="@height">
            </div>
            <div class="form-group">
                <label class="label" for="weight">Weight</label>
                <input class="input" type="text" id="weight" name="weight" placeholder="Weight"
                       @bind-value="@weight">
            </div>
        </div>
        <div>
            <div class="form-group">
                <label class="label" for="job">Job</label>
                <input class="input" type="text" id="job" name="job" placeholder="Job" @bind-value="@job">
            </div>
            <div class="form-group">
                <label class="label" for="salary">Salary</label>
                <input class="input" type="text" id="salary" name="salary" placeholder="Salary"
                       @bind-value="@salary">
            </div>
        </div>
    </div>
    <button @onclick="Submit" @onclick:preventDefault="true">Submit</button>
</form>


@code{
    private string fname;
    private string lname;
    private string age;
    private string hairColor;
    private string eyeColor;
    private string weight;
    private string height;
    private string sex;
    private string job;
    private string salary;
    private string street;
    private string houseNr;

    public void Submit()
    {
        var Adult = new Adult();
        Adult.FirstName = fname;
        Adult.LastName = lname;
        Adult.HairColor = hairColor;
        Adult.EyeColor = eyeColor;
        Adult.Age = Int32.Parse(age);
        Adult.Weight = float.Parse(weight);
        Adult.Height = Int32.Parse(height);
        Adult.Sex = sex;
        var Job = new Job();
        Job.JobTitle = job;
        Job.Salary = Int32.Parse(salary);
        Adult.JobTitle = Job;

        var id = FileContext.Adults.Last<Adult>().Id;
        Adult.Id = id + 1;

        adultData.AddAdult(Adult);

        NavigationManager.NavigateTo("/adults");
    }




}